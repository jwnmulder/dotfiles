# {{ if and (.is_desktop) (eq .chezmoi.os "linux") }}
".local/bin/bw":
  type: file
  url: "https://vault.bitwarden.com/download/?app=cli&platform=linux"
  executable: true
  refreshPeriod: "168h"
  filter:
    command: "zcat"

".local/bin/kubectl":
  type: file
  url: "https://dl.k8s.io/release/{{ .versions.kubectl }}/bin/linux/{{ .chezmoi.arch }}/kubectl"
  executable: true

".local/bin/kustomize":
  type: archive-file
  url: "https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize/{{ .versions.kustomize }}/kustomize_{{ .versions.kustomize }}_linux_{{ .chezmoi.arch }}.tar.gz"
  path: "kustomize"

".local/bin/helm":
  type: archive-file
  url: "https://get.helm.sh/helm-{{ .versions.helm }}-linux-{{ .chezmoi.arch }}.tar.gz"
  path: '{{ printf "linux-%s/helm" .chezmoi.arch }}'

".local/bin/backstage":
  type: archive-file
  url: 'https://github.com/einride/backstage-go/releases/download/{{ .versions.backstage_go }}/backstage-go_{{ .versions.backstage_go | trimPrefix "v" }}_linux_{{ .chezmoi.arch }}.tar.gz'
  path: "backstage"

".local/bin/age":
  type: archive-file
  url: "https://github.com/FiloSottile/age/releases/download/{{ .versions.age }}/age-{{ .versions.age }}-{{ .chezmoi.os }}-{{ .chezmoi.arch }}.tar.gz"
  path: "age/age"

".local/bin/age-keygen":
  type: archive-file
  url: "https://github.com/FiloSottile/age/releases/download/{{ .versions.age }}/age-{{ .versions.age }}-{{ .chezmoi.os }}-{{ .chezmoi.arch }}.tar.gz"
  path: "age/age-keygen"

".local/bin/direnv":
  type: file
  url: "https://github.com/direnv/direnv/releases/download/{{ .versions.direnv }}/direnv.linux-{{ .chezmoi.arch }}"
  executable: true

".local/bin/azcopy":
  type: archive-file
  url: "https://aka.ms/downloadazcopy-v10-linux"
  stripComponents: 1
  refreshPeriod: "168h"
  path: "azcopy"
  executable: true

".local/share/nvm/":
  type: archive
  url: "https://github.com/nvm-sh/nvm/archive/master.tar.gz"
  stripComponents: 1
  refreshPeriod: "168h"

# {{ end }}

# {{ if eq .chezmoi.os "linux" }}
".local/bin/fzf":
  type: archive-file
  url: https://github.com/junegunn/fzf/releases/download/{{ .versions.fzf }}/fzf-{{ .versions.fzf }}-linux_{{
      eq .chezmoi.arch "arm" | ternary (.uname.machine | trimSuffix "tel") .chezmoi.arch
    }}.tar.gz
  path: "fzf"

".config/fzf/":
  type: archive
  url: "https://github.com/junegunn/fzf/archive/refs/tags/{{ .versions.fzf }}.tar.gz"
  exact: true
  stripComponents: 2
  include: ["fzf-{{ .versions.fzf }}/shell/**"]

# {{ if eq .chezmoi.arch "amd64" }}
".local/bin/fd":
  type: archive-file
  url: "https://github.com/sharkdp/fd/releases/download/{{ .versions.fd }}/fd-{{ .versions.fd }}-{{ .uname.machine }}-unknown-linux-gnu.tar.gz"
  path: "fd-{{ .versions.fd }}-{{ .uname.machine }}-unknown-linux-gnu/fd"

".local/bin/trivy":
  type: archive-file
  url: https://github.com/aquasecurity/trivy/releases/download/{{ .versions.trivy }}/trivy_{{ .versions.trivy | trimPrefix "v" }}_Linux-64bit.tar.gz
  path: "trivy"
# {{ end }}

".local/share/oh-my-zsh/":
  type: archive
  url: "https://github.com/ohmyzsh/ohmyzsh/archive/master.tar.gz"
  exact: true
  stripComponents: 1
  refreshPeriod: "168h"

".local/share/oh-my-zsh/custom/themes/powerlevel10k/":
  type: archive
  url: "https://github.com/romkatv/powerlevel10k/archive/master.tar.gz"
  exact: true
  stripComponents: 1
  refreshPeriod: "168h"

".local/share/oh-my-zsh/custom/plugins/zsh-autosuggestions/":
  type: archive
  url: "https://github.com/zsh-users/zsh-autosuggestions/archive/master.tar.gz"
  exact: true
  stripComponents: 1
  refreshPeriod: "168h"

".local/share/oh-my-zsh/custom/plugins/zsh-nvm/":
  type: archive
  url: "https://github.com/lukechilds/zsh-nvm/archive/master.tar.gz"
  exact: true
  stripComponents: 1
  refreshPeriod: "168h"

".local/share/oh-my-zsh/custom/plugins/fast-syntax-highlighting/":
  type: archive
  url: "https://github.com/zdharma-continuum/fast-syntax-highlighting/archive/master.tar.gz"
  exact: true
  stripComponents: 1
  refreshPeriod: "168h"

# {{ end }}

# {{ if eq .chezmoi.os "windows" }}
"AppData/Local/starship":
  type: archive
  url: "https://github.com/starship/starship/releases/download/{{ .versions.starship }}/starship-x86_64-pc-windows-msvc.zip"

".local/bin/wsl2-ssh-pageant.exe":
  type: file
  url: "https://github.com/BlackReloaded/wsl2-ssh-pageant/releases/download/{{ .versions.wsl2_ssh_pageant }}/wsl2-ssh-pageant.exe"
# {{ end }}

# {{- if eq .chezmoi.os "windows" }}

# {{- $fontsDir := "" }}
# {{- if eq .chezmoi.os "linux" }}
# {{-   $fontsDir = ".local/share/fonts" }}
# {{- else if eq .chezmoi.os "windows" }}
# {{-   $fontsDir = ".cache/chezmoi/fonts" }}
# {{- end }}

# Further configuration instructions on https://github.com/romkatv/powerlevel10k/blob/master/font.md
"{{ $fontsDir }}/MesloLGS NF Regular.ttf":
  type: file
  url: "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS NF Regular.ttf"
  refreshPeriod: "168h"
"{{ $fontsDir }}/MesloLGS NF Bold.ttf":
  type: file
  url: "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS NF Bold.ttf"
  refreshPeriod: "168h"
"{{ $fontsDir }}/MesloLGS NF Italic.ttf":
  type: file
  url: "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS NF Italic.ttf"
  refreshPeriod: "168h"
"{{ $fontsDir }}/MesloLGS NF Bold Italic.ttf":
  type: file
  url: "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS NF Bold Italic.ttf"
  refreshPeriod: "168h"

"{{ $fontsDir }}/":
  type: archive
  url: "https://github.com/microsoft/cascadia-code/releases/download/v2111.01/CascadiaCode-2111.01.zip"
  stripComponents: 1
  include: ["ttf/*.ttf"]
# {{- end }}
